(this["webpackJsonptest-assignment"]=this["webpackJsonptest-assignment"]||[]).push([[0],{106:function(e,t,n){e.exports=n(242)},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(45),c=n.n(o),l=(n(111),n(23)),i=(n(112),n(113),n(9)),u=n(6),s=n(18),m=n.n(s),p=n(30),d=n(31),E=n.n(d),f=function(e){return{type:"USER_SIGN_UP_REQUEST",payload:e}},v=function(e){return{type:"USER_SIGN_UP_SUCCESS",payload:e}},g=function(e){return{type:"USER_SIGN_UP_FAIL",payload:e}},S=function(e){return{type:"USER_LOG_IN_REQUEST",payload:e}},b=function(e){return{type:"USER_LOG_IN_SUCCESS",payload:e}},h=function(e){return{type:"USER_LOG_IN_FAIL",payload:e}},_="https://film-api-go.herokuapp.com",O=function(e){return{type:"GET_MOVIES_SUCCESS",payload:e}},y=function(e){return{type:"GET_MOVIES_FAIL",payload:e}},N=function(e){return{type:"ADD_NEW_MOVIE_REQUEST",payload:e}},w=function(e){return{type:"ADD_NEW_MOVIE_SUCCESS",payload:e}},I=function(e){return{type:"ADD_NEW_MOVIE_FAIL",payload:e}},U=function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_MOVIES_REQUEST",payload:void 0}),e.next=4,E()({methos:"GET",headers:{Authorization:"Bearer ".concat(localStorage.JwtToken)},url:"".concat(_,"/api/v1/film?")});case 4:n=e.sent,t(O(n.data.result)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(y(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},j=Object(u.b)((function(e){return{login:e.userReducer.login,movies:e.moviesReducer.movies}}),(function(e){return{userLogOut:function(){return e({type:"USER_LOG_OUT",payload:t});var t},GetAllMovies:function(){return e(U())}}}))((function(e){var t=e.login,n=e.userLogOut,r=e.GetAllMovies;e.movies;return a.a.createElement("div",{className:"header_component"},a.a.createElement("div",{className:"logo"}," "),a.a.createElement("div",{className:"nav"},t&&a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(i.b,{onClick:function(){r()},to:"/dashboard"},"List of movies")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/newMovie"}," Add new movie")))),a.a.createElement("div",{className:"user"},t?a.a.createElement("span",{onClick:function(){n()}},"Log Out"):a.a.createElement(i.b,{to:"/login"}," ",a.a.createElement("span",null,"Log In")),t?a.a.createElement("span",null,t):a.a.createElement(i.b,{to:"/auth"},a.a.createElement("span",null,"Sign Up"))))})),L=(n(136),function(e){return a.a.createElement("div",{className:"footer_component"})}),R=n(244),C=n(243),k=(n(137),function(e){var t=e.handleSubmit;return a.a.createElement("div",{className:"sign_up_form"},a.a.createElement("form",{onSubmit:t},a.a.createElement(R.a,{name:"login",type:"text",component:"input",placeholder:"Login",required:!0}),a.a.createElement(R.a,{name:"password",type:"password",component:"input",placeholder:"Password",required:!0}),a.a.createElement(R.a,{name:"username",type:"text",component:"input",placeholder:"Name",required:!0}),a.a.createElement(R.a,{name:"age",type:"number",component:"input",placeholder:"Age",required:!0}),a.a.createElement(R.a,{name:"telephone",type:"text",component:"input",placeholder:"Telephone",required:!0}),a.a.createElement("button",null,"Sign Up")))}),F=k=Object(C.a)({form:"SignUp"})(k),P=Object(u.b)((function(e){return{SignUpError:e.userReducer.SignUpError,SignUpSucc:e.userReducer.SignUpSucc}}),(function(e){return{SignUp:function(t){return e((n=t,function(){var e=Object(p.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(f()),e.next=4,E()({method:"POST",url:"".concat(_,"/auth"),data:n});case 4:r=e.sent,t(v(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(g(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));var n}}}))((function(e){var t=e.SignUpError,n=e.SignUpSucc;return!t&&n?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",{className:"sign_up"},a.a.createElement(F,{onSubmit:function(t){return function(t){var n=t.age,r=t.username,a=t.password,o=t.login,c=t.telephone,l={age:Number(n),username:r,password:a,login:o,telephone:c};e.SignUp(l)}(t)}}),t&&a.a.createElement("span",null,"This user already registered"))})),T=(n(236),function(e){var t=e.handleSubmit,n=e.isFatching;return a.a.createElement("div",{className:"log_in__form"},a.a.createElement("form",{className:"formSignIn",onSubmit:t},a.a.createElement(R.a,{name:"login",type:"text",component:"input",placeholder:"Login",required:!0}),a.a.createElement(R.a,{name:"password",type:"password",component:"input",placeholder:"Password",required:!0}),a.a.createElement("button",null,n?"Loading...":"Log in")))});T=Object(C.a)({form:"LogIn"})(T);var M=Object(u.b)((function(e){return{isFetching:e.userReducer.isFetching}}))(T),G=Object(u.b)((function(e){return{logInSucc:e.userReducer.logInSucc,logInError:e.userReducer.logInError,login:e.userReducer.login}}),(function(e){return{LogIn:function(t){return e((n=t,function(){var e=Object(p.a)(m.a.mark((function e(t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(S()),e.next=4,E()({method:"POST",url:"".concat(_,"/login"),data:n});case 4:r=e.sent,localStorage.setItem("JwtToken",r.data.token),a=JSON.parse(r.config.data.split(",")[0].split(":")[1]),localStorage.setItem("login",a),t(b(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(h(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()));var n}}}))((function(e){var t=e.logInError,n=e.logInSucc;return e.login&&!t&&n?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",{className:"log_in"},a.a.createElement(M,{onSubmit:function(t){return n=t,void e.LogIn(n);var n}}),t&&a.a.createElement("span",null,"This user not found"))})),x=(n(237),function(e){var t=e.name,n=e.id,r=e.func;return a.a.createElement("div",{onClick:function(){return r(n)},className:"dashItem"},a.a.createElement("div",{className:"movieName"},a.a.createElement("span",{id:n},t)))}),A=(n(238),Object(u.b)((function(e){return{selected:e.moviesReducer.selected,movies:e.moviesReducer.movies}}),(function(e){return{fullInfo:function(t){return e({type:"FULL_MOVIE_INFO",payload:t})}}}))((function(e){var t=e.movies,n=e.selected;return null!==n?a.a.createElement(l.a,{to:"/fullinfo"}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"dashboard_wrap"},a.a.createElement("div",{className:"dashbord_header"},a.a.createElement("div",null,"List of movies ")),a.a.createElement("div",{className:"content_wrap"},a.a.createElement("ul",{className:"dashbord_content"},t&&t.map((function(t){return a.a.createElement(x,Object.assign({func:function(t){return n=t,void e.fullInfo(n);var n},key:t.id},t))}))))))}))),D=(n(239),Object(u.b)((function(e){return{selected:e.moviesReducer.selected,movies:e.moviesReducer.movies}}))((function(e){var t=e.movies,n=e.selected,r=t.filter((function(e){return e.id===n}))[0];return a.a.createElement("div",{className:"detailItem"},a.a.createElement("div",{className:"movieName"},a.a.createElement("span",null,"Name :"),a.a.createElement("span",null," ",r.name)),a.a.createElement("div",{className:"movieAge"},a.a.createElement("span",null,"Year :"),r.year&&a.a.createElement("span",null," ",r.year)),a.a.createElement("div",{className:"movieGenre"},a.a.createElement("span",null,"Genre :"),a.a.createElement("span",null," ",r.genres&&r.genres.map((function(e){return a.a.createElement("span",{key:e.id},e.name," ")})))))}))),V=(n(240),Object(u.b)((function(e){return{selected:e.moviesReducer.selected}}),(function(e){return{ClosefullInfo:function(t){return e({type:"CLOSE_FULL_MOVIE_INFO",payload:t})}}}))((function(e){return null===e.selected?a.a.createElement(l.a,{to:"/dashboard"}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"details_wrap"},a.a.createElement(D,null),a.a.createElement("button",{onClick:function(){e.ClosefullInfo()}},"Close")))}))),q=(n(241),function(e){var t=e.handleSubmit;return a.a.createElement("div",{className:"new_movie_form"},a.a.createElement("form",{onSubmit:t},a.a.createElement(R.a,{name:"name",type:"text",component:"input",placeholder:"Name",required:!0}),a.a.createElement(R.a,{name:"year",type:"text",component:"input",placeholder:"Year",required:!0}),a.a.createElement("div",{className:"field_wrap"},a.a.createElement("label",null,"Comedy"),a.a.createElement(R.a,{name:"Comedy",component:"input",id:"Comedy",type:"checkbox"})),a.a.createElement("div",{className:"field_wrap"},a.a.createElement("label",null,"Horror"),a.a.createElement(R.a,{name:"Horror",component:"input",id:"Horror",type:"checkbox"})),a.a.createElement("div",{className:"field_wrap"},a.a.createElement("label",null,"Drama"),a.a.createElement(R.a,{name:"Drama",component:"input",id:"Drama",type:"checkbox"})),a.a.createElement("button",null,"New movie")))}),J=q=Object(C.a)({form:"NewMovie"})(q),Q=Object(u.b)((function(e){return{closeNewMovieComponent:e.moviesReducer.closeNewMovieComponent}}),(function(e){return{AddNewMovie:function(t){return e((n=t,function(){var e=Object(p.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(N()),e.next=4,E()({method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.JwtToken)},url:"".concat(_,"/api/v1/film"),data:n});case 4:r=e.sent,t(w(r)),t(U()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(I(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));var n}}}))((function(e){return!0===e.closeNewMovieComponent?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",{className:"new_movie_wrap"},a.a.createElement(J,{onSubmit:function(t){return function(t){var n=t.name,r=t.year,a=t.Comedy,o=t.Horror,c=t.Drama,l=[],i=Number(r);a&&!0===a&&l.push(1),o&&!0===o&&l.push(2),c&&!0===c&&l.push(3);var u={name:n,year:i,genres:l};e.AddNewMovie(u)}(t)}}))})),W=n(105),B=Object(u.b)((function(e){return{login:e.userReducer.login}}))((function(e){var t=e.component,n=e.login,r=Object(W.a)(e,["component","login"]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.b,Object.assign({},r,{render:function(e){return n?a.a.createElement(t,e):a.a.createElement(l.a,{to:"/login"})}})))})),H=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(j,null),a.a.createElement(l.d,null,a.a.createElement(l.b,{path:"/",exact:!0}),a.a.createElement(l.b,{path:"/login",component:G}),a.a.createElement(l.b,{path:"/auth",component:P}),a.a.createElement(B,{path:"/dashboard",component:A}),a.a.createElement(B,{path:"/fullinfo",component:V}),a.a.createElement(B,{path:"/newMovie",component:Q})),a.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(7),Y=n(245),$=n(48);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object($.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={isFetching:!1,SignUpError:!1,SignUpSucc:!1,logInError:!1,logInSucc:!1,login:null};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object($.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne={movies:null,selected:null,closeNewMovieComponent:!1},re=Object(z.c)({form:Y.a,userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"USER_SIGN_UP_REQUEST":return X({},e,{SignUpError:!1,isFetching:!0,SignUpSucc:!1});case"USER_SIGN_UP_SUCCESS":return X({},e,{SignUpSucc:!0,isFetching:!1});case"USER_SIGN_UP_FAIL":return X({},e,{SignUpError:!0,isFetching:!1});case"USER_LOG_IN_REQUEST":return X({},e,{logInError:!1,isFetching:!0,logInSucc:!1});case"USER_LOG_IN_SUCCESS":return X({},e,{logInSucc:!0,isFetching:!1,login:r});case"USER_LOG_IN_FAIL":return X({},e,{logInError:!0,isFetching:!1});case"AUTO_LOG_IN":return X({},e,{login:r});case"USER_LOG_OUT":return localStorage.removeItem("JwtToken"),localStorage.removeItem("login"),X({},e,{login:null});default:return e}},moviesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"GET_MOVIES_SUCCESS":return te({},e,{movies:r});case"FULL_MOVIE_INFO":return te({},e,{selected:r});case"CLOSE_FULL_MOVIE_INFO":return te({},e,{selected:null});case"ADD_NEW_MOVIE_REQUEST":return te({},e,{closeNewMovieComponent:!1});case"ADD_NEW_MOVIE_SUCCESS":return te({},e,{closeNewMovieComponent:!0});default:return e}}}),ae=n(104),oe=Object(z.d)(re,Object(z.a)(ae.a));localStorage.JwtToken&&oe.dispatch({type:"AUTO_LOG_IN",payload:localStorage.login}),c.a.render(a.a.createElement(u.a,{store:oe},a.a.createElement(i.a,null,a.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[106,1,2]]]);
//# sourceMappingURL=main.6e340cb0.chunk.js.map